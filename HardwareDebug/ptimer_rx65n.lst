   1                             		.file	"ptimer_rx65n.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   5                             	_out_h:
   6                             	.LFB1:
   7                             		.file 1 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include\\tk\\sysdepend\\cpu\\rx65n\\syslib
   1:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
   2:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   3:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    micro T-Kernel 3.00.06.B0
   4:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   5:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    This software is distributed under the T-License 2.2.
   7:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   8:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   9:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Released by TRON Forum(http://www.tron.org) at 2022/04.
  10:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  11:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
  12:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  13:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  14:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	syslib.h
  15:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  16:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	micro T-Kernel System Library  (RX65N depended)
  17:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  18:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  19:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #ifndef __TK_SYSLIB_CPU_DEPEND_H__
  20:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define __TK_SYSLIB_CPU_DEPEND_H__
  21:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  22:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #include "../core/rxv2/syslib.h"
  23:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  24:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*----------------------------------------------------------------------*/
  25:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  26:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * Interrupt controller Control
  27:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  28:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  29:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LEVEL	0x0004		/* Level trigger */
  30:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_EDGE		0x0000		/* Edge trigger */
  31:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  32:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_HI		0x0000		/* H level/Interrupt at rising edge */
  33:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LOW		0x0001		/* L level/Interrupt at falling edge */
  34:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_BOTH		0x0003		/* L level/Interrupt at both edge */
  35:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  36:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /* ------------------------------------------------------------------------ */
  37:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  38:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * I/O port access
  39:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	for memory mapped I/O
  40:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  41:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_w( UW port, UW data )
  42:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  43:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UW*)port = data;
  44:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  45:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_h( UW port, UH data )
  46:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
   8                             		.loc 1 46 1
   9 0000 7E AA                   		push.l	r10
  10                             	.LCFI0:
  11 0002 71 0A F8                		add	#-8, r0, r10
  12                             	.LCFI1:
  13 0005 EF A0                   		mov.L	r10, r0
  14 0007 E3 A1                   		mov.L	r1, [r10]
  15 0009 D7 A2 02                		mov.W	r2, 4[r10]
  47:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UH*)port = data;
  16                             		.loc 1 47 3
  17 000c EC A5                   		mov.L	[r10], r5
  18                             		.loc 1 47 14
  19 000e DD A4 02                		mov.W	4[r10], r4
  20 0011 D3 54                   		mov.W	r4, [r5]
  48:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  21                             		.loc 1 48 1
  22 0013 03                      		nop
  23 0014 3F AA 03                		rtsd	#12, r10-r10
  24                             	.LFE1:
  27                             	_out_b:
  28                             	.LFB2:
  49:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_b( UW port, UB data )
  50:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  29                             		.loc 1 50 1
  30 0017 7E AA                   		push.l	r10
  31                             	.LCFI2:
  32 0019 71 0A F8                		add	#-8, r0, r10
  33                             	.LCFI3:
  34 001c EF A0                   		mov.L	r10, r0
  35 001e E3 A1                   		mov.L	r1, [r10]
  36 0020 C7 A2 04                		mov.B	r2, 4[r10]
  51:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UB*)port = data;
  37                             		.loc 1 51 3
  38 0023 EC A5                   		mov.L	[r10], r5
  39                             		.loc 1 51 14
  40 0025 CD A4 04                		mov.B	4[r10], r4
  41 0028 C3 54                   		mov.B	r4, [r5]
  52:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  42                             		.loc 1 52 1
  43 002a 03                      		nop
  44 002b 3F AA 03                		rtsd	#12, r10-r10
  45                             	.LFE2:
  48                             	_in_h:
  49                             	.LFB4:
  53:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  54:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline UW in_w( UW port )
  55:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  56:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	return *(_UW*)port;
  57:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  58:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline UH in_h( UW port )
  59:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  50                             		.loc 1 59 1
  51 002e 7E AA                   		push.l	r10
  52                             	.LCFI4:
  53 0030 71 0A FC                		add	#-4, r0, r10
  54                             	.LCFI5:
  55 0033 EF A0                   		mov.L	r10, r0
  56 0035 E3 A1                   		mov.L	r1, [r10]
  60:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	return *(_UH*)port;
  57                             		.loc 1 60 10
  58 0037 EC A5                   		mov.L	[r10], r5
  59                             		.loc 1 60 9
  60 0039 DC 55                   		mov.W	[r5], r5
  61 003b 5F 55                   		movu.W	r5, r5
  61:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  62                             		.loc 1 61 1
  63 003d EF 51                   		mov.L	r5, r1
  64 003f 3F AA 02                		rtsd	#8, r10-r10
  65                             	.LFE4:
  67                             		.global	_ptmrcb
  68                             		.section D,"aw",@progbits
  69                             		.p2align 2
  70                             		.balign 4
  73                             	_ptmrcb:
  74 0000 00 82 08 00             		.long	0x88200
  75 0004 FF FF FF FF             		.long	-1
  76 0008 00 00 00 00             		.long	0
  77 000c 00 00 00 00             		.long	0
  78 0010 05 00 00 00             		.long	5
  79 0014 00 00 00 00             		.long	0
  80 0018 08 00 00 00             		.long	8
  81 001c 00 00 00 00             		.long	0
  82 0020 10 82 08 00             		.long	0x88210
  83 0024 FF FF FF FF             		.long	-1
  84 0028 00 00 00 00             		.long	0
  85 002c 00 00 00 00             		.long	0
  86 0030 05 00 00 00             		.long	5
  87 0034 00 00 00 00             		.long	0
  88 0038 08 00 00 00             		.long	8
  89 003c 00 00 00 00             		.long	0
  90                             		.section P,"ax"
  92                             	_ptmr_int_main:
  93                             	.LFB6:
  94                             		.file 2 "../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c"
   1:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** ï»¿/*
   2:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *----------------------------------------------------------------------
   3:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *    micro T-Kernel 3.00.06.B0
   4:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *
   5:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *    This software is distributed under the T-License 2.2.
   7:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *----------------------------------------------------------------------
   8:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *
   9:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *    Released by TRON Forum(http://www.tron.org) at 2022/04.
  10:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *
  11:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *----------------------------------------------------------------------
  12:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  */
  13:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  14:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #include <sys/machine.h>
  15:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #ifdef CPU_RX65N
  16:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** /*
  17:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *	ptimer_rx65n.c
  18:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *
  19:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  *	Physical timer (for RX65N)
  20:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  */
  21:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #include <tk/tkernel.h>
  22:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #include <tk/syslib.h>
  23:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  24:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #if USE_PTMR
  25:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  26:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** typedef struct {
  27:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	UW	baddr;		// Register Base Address
  28:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	INT	mode;		// Timer mode
  29:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	UW	limit;		// Counter Limit
  30:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	FP	ptmrhdr;	// Timer Hnadler
  31:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	PRI	intptr;		// Interrupt priority
  32:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	UINT	intno;		// Interrupt No.
  33:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	UW	clock;		// Source clock
  34:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	void	*exinf;		// Extended information
  35:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** } T_PTMRCB;
  36:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  37:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** T_PTMRCB ptmrcb[TK_MAX_PTIMER] = {
  38:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	{ TMR01_BASE, -1, 0, (FP)NULL, INTPRI_TMR01, 0, TMR01_CLOCK, 0 },
  39:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	{ TMR23_BASE, -1, 0, (FP)NULL, INTPRI_TMR23, 0, TMR23_CLOCK, 0 },
  40:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** };
  41:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  42:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCR		(p_cb->baddr + TCR)
  43:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCSR	(p_cb->baddr + TCSR)
  44:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCOR	(p_cb->baddr + TCORA)
  45:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCNT	(p_cb->baddr + TCNT)
  46:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCCR	(p_cb->baddr + TCCR)
  47:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define	TMR_TCSTR	(p_cb->baddr + TCSTR)
  48:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  49:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** /*
  50:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  * Physical timer interrupt handler
  51:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  */
  52:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** LOCAL void ptmr_int_main( UINT intno, T_PTMRCB *p_cb)
  53:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
  95                             		.loc 2 53 1
  96 0042 7E AA                   		push.l	r10
  97                             	.LCFI6:
  98 0044 71 0A F8                		add	#-8, r0, r10
  99                             	.LCFI7:
 100 0047 EF A0                   		mov.L	r10, r0
 101 0049 E3 A1                   		mov.L	r1, [r10]
 102 004b E7 A2 01                		mov.L	r2, 4[r10]
  54:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	ClearInt( intno);
 103                             		.loc 2 54 2
 104 004e EC A1                   		mov.L	[r10], r1
 105 0050 05 00 00 00             		bsr	_ClearInt
  55:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( p_cb->ptmrhdr != NULL) {
 106                             		.loc 2 55 10
 107 0054 ED A5 01                		mov.L	4[r10], r5
 108 0057 A8 DD                   		mov.L	12[r5], r5
 109                             		.loc 2 55 4
 110 0059 61 05                   		cmp	#0, r5
 111 005b 20 10                   		beq	.L6
  56:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		(*p_cb->ptmrhdr)( p_cb->exinf);		// Execute user handler.
 112                             		.loc 2 56 4
 113 005d ED A5 01                		mov.L	4[r10], r5
 114 0060 A8 DD                   		mov.L	12[r5], r5
 115 0062 ED A4 01                		mov.L	4[r10], r4
 116 0065 A9 CC                   		mov.L	28[r4], r4
 117 0067 EF 41                   		mov.L	r4, r1
 118 0069 7F 15                   		jsr	r5
 119                             	.LVL0:
 120                             	.L6:
  57:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
  58:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  59:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( p_cb->mode == TA_ALM_PTMR)  {
 121                             		.loc 2 59 10
 122 006b ED A5 01                		mov.L	4[r10], r5
 123 006e A8 5D                   		mov.L	4[r5], r5
 124                             		.loc 2 59 4
 125 0070 61 05                   		cmp	#0, r5
 126 0072 21 16                   		bne	.L8
  60:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		/* Stop Pysical timer */
  61:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		DisableInt( intno);
 127                             		.loc 2 61 3
 128 0074 EC A1                   		mov.L	[r10], r1
 129 0076 05 00 00 00             		bsr	_DisableInt
  62:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		out_h(TMR_TCCR, 0);			// Timer Stop
 130                             		.loc 2 62 9
 131 007a ED A5 01                		mov.L	4[r10], r5
 132 007d EC 55                   		mov.L	[r5], r5
 133                             		.loc 2 62 3
 134 007f 62 A5                   		add	#10, r5
 135 0081 66 02                   		mov	#0, r2
 136 0083 EF 51                   		mov.L	r5, r1
 137 0085 39 7B FF                		bsr	_out_h
 138                             	.L8:
  63:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
  64:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 139                             		.loc 2 64 1
 140 0088 03                      		nop
 141 0089 3F AA 03                		rtsd	#12, r10-r10
 142                             	.LFE6:
 145                             	_ptmr1_inthdr:
 146                             	.LFB7:
  65:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  66:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** LOCAL void ptmr1_inthdr( UINT intno ) { ptmr_int_main( intno, &ptmrcb[0]); }
 147                             		.loc 2 66 39
 148 008c 7E AA                   		push.l	r10
 149                             	.LCFI8:
 150 008e 71 0A FC                		add	#-4, r0, r10
 151                             	.LCFI9:
 152 0091 EF A0                   		mov.L	r10, r0
 153 0093 E3 A1                   		mov.L	r1, [r10]
 154                             		.loc 2 66 41
 155 0095 FB 22 00 00 00 00       		mov.L	#_ptmrcb, r2
 156 009b EC A1                   		mov.L	[r10], r1
 157 009d 39 A5 FF                		bsr	_ptmr_int_main
 158                             		.loc 2 66 1
 159 00a0 03                      		nop
 160 00a1 3F AA 02                		rtsd	#8, r10-r10
 161                             	.LFE7:
 164                             	_ptmr2_inthdr:
 165                             	.LFB8:
  67:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** LOCAL void ptmr2_inthdr( UINT intno ) { ptmr_int_main( intno, &ptmrcb[1]); }
 166                             		.loc 2 67 39
 167 00a4 7E AA                   		push.l	r10
 168                             	.LCFI10:
 169 00a6 71 0A FC                		add	#-4, r0, r10
 170                             	.LCFI11:
 171 00a9 EF A0                   		mov.L	r10, r0
 172 00ab E3 A1                   		mov.L	r1, [r10]
 173                             		.loc 2 67 41
 174 00ad FB 22 00 00 00 00       		mov.L	#_ptmrcb+32, r2
 175 00b3 EC A1                   		mov.L	[r10], r1
 176 00b5 39 8D FF                		bsr	_ptmr_int_main
 177                             		.loc 2 67 1
 178 00b8 03                      		nop
 179 00b9 3F AA 02                		rtsd	#8, r10-r10
 180                             	.LFE8:
 182                             		.section C,"a",@progbits
 183                             		.p2align 2
 184                             		.balign 4
 187                             	_inthdr_tbl:
 188 0000 8C 00 00 00             		.long	_ptmr1_inthdr
 189 0004 A4 00 00 00             		.long	_ptmr2_inthdr
 190                             		.section P,"ax"
 191                             		.global	_StartPhysicalTimer
 193                             	_StartPhysicalTimer:
 194                             	.LFB9:
  68:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  69:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** LOCAL void (* const inthdr_tbl[])() = {
  70:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	ptmr1_inthdr, ptmr2_inthdr
  71:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** };
  72:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  73:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define INTNO_CMIA(no)	(no==1?INTNO_CMIA0:INTNO_CMIA2)
  74:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** #define INTNO_OVI(no)	(no==1?INTNO_OVI0:INTNO_OVI2)
  75:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  76:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** /*
  77:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  * Start of physical timer operation
  78:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c ****  */
  79:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** EXPORT ER StartPhysicalTimer( UINT ptmrno, UW limit, UINT mode)
  80:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
 195                             		.loc 2 80 1
 196 00bc 7E AA                   		push.l	r10
 197                             	.LCFI12:
 198 00be 71 0A E4                		add	#-28, r0, r10
 199                             	.LCFI13:
 200 00c1 EF A0                   		mov.L	r10, r0
 201 00c3 E7 A1 04                		mov.L	r1, 16[r10]
 202 00c6 E7 A2 05                		mov.L	r2, 20[r10]
 203 00c9 E7 A3 06                		mov.L	r3, 24[r10]
  81:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_DINT		dint;
  82:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_PTMRCB	*p_cb;
  83:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	ER		err;
  84:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  85:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* parameter check */
  86:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if(( ptmrno == 0 || ptmrno > TK_MAX_PTIMER ) || ( limit == 0 || limit > PTMR_MAX_CNT )
 204                             		.loc 2 86 4
 205 00cc ED A5 04                		mov.L	16[r10], r5
 206 00cf 61 05                   		cmp	#0, r5
 207 00d1 20 21                   		beq	.L12
 208                             		.loc 2 86 19 discriminator 1
 209 00d3 ED A5 04                		mov.L	16[r10], r5
 210 00d6 61 25                   		cmp	#2, r5
 211 00d8 24 1A                   		bgtu	.L12
 212                             		.loc 2 86 47 discriminator 2
 213 00da ED A5 05                		mov.L	20[r10], r5
 214 00dd 61 05                   		cmp	#0, r5
 215 00df 20 13                   		beq	.L12
 216                             		.loc 2 86 63 discriminator 3
 217 00e1 ED A5 05                		mov.L	20[r10], r5
 218 00e4 77 05 FF FF 00          		cmp	#0xffff, r5
 219 00e9 24 09                   		bgtu	.L12
  87:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		|| ( mode > TA_CYC_PTMR ))	return E_PAR;
 220                             		.loc 2 87 3
 221 00eb ED A5 06                		mov.L	24[r10], r5
 222 00ee 61 15                   		cmp	#1, r5
 223 00f0 25 08                   		bleu	.L13
 224                             		.balign 8,3,2
 225                             	.L12:
 226                             		.loc 2 87 37 discriminator 1
 227 00f2 FB 56 EF                		mov.L	#-17, r5
 228 00f5 38 EB 00                		bra	.L22
 229                             	.L13:
  88:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  89:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb = &ptmrcb[ptmrno - 1];
 230                             		.loc 2 89 24
 231 00f8 ED A5 04                		mov.L	16[r10], r5
 232 00fb 60 15                   		sub	#1, r5
 233                             		.loc 2 89 7
 234 00fd 6C 55                   		shll	#5, r5
 235 00ff 70 55 00 00 00 00       		add	#_ptmrcb, r5
 236 0105 E3 A5                   		mov.L	r5, [r10]
  90:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb->limit	= limit;
 237                             		.loc 2 90 14
 238 0107 EC A5                   		mov.L	[r10], r5
 239 0109 ED A4 05                		mov.L	20[r10], r4
 240 010c A0 D4                   		mov.L	r4, 8[r5]
  91:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb->mode	= mode;
 241                             		.loc 2 91 13
 242 010e ED A4 06                		mov.L	24[r10], r4
 243 0111 EC A5                   		mov.L	[r10], r5
 244 0113 A0 5C                   		mov.L	r4, 4[r5]
  92:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  93:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Timer initialization */
  94:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	out_h(TMR_TCCR, 0);			// Timer Stop
 245                             		.loc 2 94 8
 246 0115 EC A5                   		mov.L	[r10], r5
 247 0117 EC 55                   		mov.L	[r5], r5
 248                             		.loc 2 94 2
 249 0119 62 A5                   		add	#10, r5
 250 011b 66 02                   		mov	#0, r2
 251 011d EF 51                   		mov.L	r5, r1
 252 011f 39 E1 FE                		bsr	_out_h
  95:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	out_h(TMR_TCNT, 0);			// Counter Clear
 253                             		.loc 2 95 8
 254 0122 EC A5                   		mov.L	[r10], r5
 255 0124 EC 55                   		mov.L	[r5], r5
 256                             		.loc 2 95 2
 257 0126 62 85                   		add	#8, r5
 258 0128 66 02                   		mov	#0, r2
 259 012a EF 51                   		mov.L	r5, r1
 260 012c 39 D4 FE                		bsr	_out_h
  96:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
  97:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( limit != PTMR_MAX_CNT ) {
 261                             		.loc 2 97 4
 262 012f ED A5 05                		mov.L	20[r10], r5
 263 0132 77 05 FF FF 00          		cmp	#0xffff, r5
 264 0137 20 31                   		beq	.L15
  98:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		out_h(TMR_TCOR, limit);				// Set Compare match register
 265                             		.loc 2 98 9
 266 0139 EC A5                   		mov.L	[r10], r5
 267 013b EC 55                   		mov.L	[r5], r5
 268                             		.loc 2 98 3
 269 013d 62 45                   		add	#4, r5
 270 013f ED A4 05                		mov.L	20[r10], r4
 271 0142 DF 42                   		mov.W	r4, r2
 272 0144 EF 51                   		mov.L	r5, r1
 273 0146 39 BA FE                		bsr	_out_h
  99:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		out_b(TMR_TCR, TCR_CMIEA | TCR_CCLR_CMA);	// Enable CMIAn
 274                             		.loc 2 99 9
 275 0149 EC A5                   		mov.L	[r10], r5
 276 014b EC 55                   		mov.L	[r5], r5
 277                             		.loc 2 99 3
 278 014d 75 42 48                		mov	#0x48, r2
 279 0150 EF 51                   		mov.L	r5, r1
 280 0152 39 C5 FE                		bsr	_out_b
 100:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		p_cb->intno = INTNO_CMIA(ptmrno);
 281                             		.loc 2 100 17
 282 0155 ED A5 04                		mov.L	16[r10], r5
 283 0158 61 15                   		cmp	#1, r5
 284 015a 1D                      		bne	.L16
 285                             		.loc 2 100 17 is_stmt 0 discriminator 1
 286 015b 75 44 AE                		mov.L	#0xae, r4
 287 015e 0C                      		bra	.L17
 288                             	.L16:
 289                             		.loc 2 100 17 discriminator 2
 290 015f 75 44 B4                		mov.L	#0xb4, r4
 291                             	.L17:
 292                             		.loc 2 100 15 is_stmt 1 discriminator 4
 293 0162 EC A5                   		mov.L	[r10], r5
 294 0164 A1 5C                   		mov.L	r4, 20[r5]
 295 0166 2E 1F                   		bra	.L18
 296                             	.L15:
 101:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	} else {
 102:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		out_b(TMR_TCR, TCR_OVIE);			// Enable OVIn
 297                             		.loc 2 102 9
 298 0168 EC A5                   		mov.L	[r10], r5
 299 016a EC 55                   		mov.L	[r5], r5
 300                             		.loc 2 102 3
 301 016c 75 42 20                		mov	#32, r2
 302 016f EF 51                   		mov.L	r5, r1
 303 0171 39 A6 FE                		bsr	_out_b
 103:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		p_cb->intno = INTNO_OVI(ptmrno);
 304                             		.loc 2 103 17
 305 0174 ED A5 04                		mov.L	16[r10], r5
 306 0177 61 15                   		cmp	#1, r5
 307 0179 1D                      		bne	.L19
 308                             		.loc 2 103 17 is_stmt 0 discriminator 1
 309 017a 75 44 B0                		mov.L	#0xb0, r4
 310 017d 0C                      		bra	.L20
 311                             	.L19:
 312                             		.loc 2 103 17 discriminator 2
 313 017e 75 44 B6                		mov.L	#0xb6, r4
 314                             	.L20:
 315                             		.loc 2 103 15 is_stmt 1 discriminator 4
 316 0181 EC A5                   		mov.L	[r10], r5
 317 0183 A1 5C                   		mov.L	r4, 20[r5]
 318                             	.L18:
 104:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
 105:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 106:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Register interrupt handler */
 107:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	dint.intatr	= TA_HLNG;
 319                             		.loc 2 107 14
 320 0185 F9 A6 02 01             		mov.L	#1, 8[r10]
 108:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	dint.inthdr	= inthdr_tbl[ptmrno - 1];
 321                             		.loc 2 108 34
 322 0189 ED A5 04                		mov.L	16[r10], r5
 323 018c 60 15                   		sub	#1, r5
 324                             		.loc 2 108 26
 325 018e FB 42 00 00 00 00       		mov.L	#_inthdr_tbl, r4
 326 0194 FE 65 45                		mov.L	[r5,r4], r5
 327                             		.loc 2 108 14
 328 0197 E7 A5 03                		mov.L	r5, 12[r10]
 109:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	err = tk_def_int( p_cb->intno, &dint);
 329                             		.loc 2 109 8
 330 019a EC A5                   		mov.L	[r10], r5
 331 019c A9 5C                   		mov.L	20[r5], r4
 332 019e 71 A5 08                		add	#8, r10, r5
 333 01a1 EF 52                   		mov.L	r5, r2
 334 01a3 EF 41                   		mov.L	r4, r1
 335 01a5 05 00 00 00             		bsr	_tk_def_int
 336 01a9 E7 A1 01                		mov.L	r1, 4[r10]
 110:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if(err != E_OK) {
 337                             		.loc 2 110 4
 338 01ac ED A5 01                		mov.L	4[r10], r5
 339 01af 61 05                   		cmp	#0, r5
 340 01b1 16                      		beq	.L21
 111:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		return err;
 341                             		.loc 2 111 10
 342 01b2 ED A5 01                		mov.L	4[r10], r5
 343 01b5 2E 2B                   		bra	.L22
 344                             	.L21:
 112:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
 113:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	EnableInt( p_cb->intno, p_cb->intptr);
 345                             		.loc 2 113 2
 346 01b7 EC A5                   		mov.L	[r10], r5
 347 01b9 A9 5C                   		mov.L	20[r5], r4
 348 01bb EC A5                   		mov.L	[r10], r5
 349 01bd A9 55                   		mov.L	16[r5], r5
 350 01bf EF 52                   		mov.L	r5, r2
 351 01c1 EF 41                   		mov.L	r4, r1
 352 01c3 05 00 00 00             		bsr	_EnableInt
 114:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 115:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Start Physical Timer */
 116:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	out_h(TMR_TCCR, TCCR_CSS_16BIT | (p_cb->clock)<<8);	// 16bit mode & Clock set
 353                             		.loc 2 116 8
 354 01c7 EC A5                   		mov.L	[r10], r5
 355 01c9 EC 55                   		mov.L	[r5], r5
 356                             		.loc 2 116 2
 357 01cb 71 54 0A                		add	#10, r5, r4
 358                             		.loc 2 116 40
 359 01ce EC A5                   		mov.L	[r10], r5
 360 01d0 A9 D5                   		mov.L	24[r5], r5
 361                             		.loc 2 116 48
 362 01d2 6C 85                   		shll	#8, r5
 363                             		.loc 2 116 2
 364 01d4 75 35 18                		or	#24, r5
 365 01d7 DF 52                   		mov.W	r5, r2
 366 01d9 EF 41                   		mov.L	r4, r1
 367 01db 39 25 FE                		bsr	_out_h
 117:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 118:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	return E_OK;
 368                             		.loc 2 118 9
 369 01de 66 05                   		mov.L	#0, r5
 370                             	.L22:
 119:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 371                             		.loc 2 119 1 discriminator 1
 372 01e0 EF 51                   		mov.L	r5, r1
 373 01e2 3F AA 08                		rtsd	#32, r10-r10
 374                             	.LFE9:
 376                             		.global	_StopPhysicalTimer
 378                             	_StopPhysicalTimer:
 379                             	.LFB10:
 120:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 121:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** EXPORT ER StopPhysicalTimer( UINT ptmrno )
 122:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
 380                             		.loc 2 122 1
 381 01e5 7E AA                   		push.l	r10
 382                             	.LCFI14:
 383 01e7 71 0A F8                		add	#-8, r0, r10
 384                             	.LCFI15:
 385 01ea EF A0                   		mov.L	r10, r0
 386 01ec E7 A1 01                		mov.L	r1, 4[r10]
 123:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_PTMRCB	*p_cb;
 124:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 125:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* parameter check */
 126:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( ptmrno == 0 || ptmrno > TK_MAX_PTIMER ) return E_PAR;
 387                             		.loc 2 126 4
 388 01ef ED A5 01                		mov.L	4[r10], r5
 389 01f2 61 05                   		cmp	#0, r5
 390 01f4 10                      		beq	.L24
 391                             		.loc 2 126 18 discriminator 2
 392 01f5 ED A5 01                		mov.L	4[r10], r5
 393 01f8 61 25                   		cmp	#2, r5
 394 01fa 25 07                   		bleu	.L25
 395                             	.L24:
 396                             		.loc 2 126 53 discriminator 3
 397 01fc FB 56 EF                		mov.L	#-17, r5
 398 01ff 2E 2A                   		bra	.L26
 399                             	.L25:
 127:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 128:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb = &ptmrcb[ptmrno - 1];
 400                             		.loc 2 128 24
 401 0201 ED A5 01                		mov.L	4[r10], r5
 402 0204 60 15                   		sub	#1, r5
 403                             		.loc 2 128 7
 404 0206 6C 55                   		shll	#5, r5
 405 0208 70 55 00 00 00 00       		add	#_ptmrcb, r5
 406 020e E3 A5                   		mov.L	r5, [r10]
 129:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 130:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Stop Physical Timer */
 131:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	DisableInt( p_cb->intno);
 407                             		.loc 2 131 2
 408 0210 EC A5                   		mov.L	[r10], r5
 409 0212 A9 5D                   		mov.L	20[r5], r5
 410 0214 EF 51                   		mov.L	r5, r1
 411 0216 05 00 00 00             		bsr	_DisableInt
 132:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	out_h(TMR_TCCR, 0);			// Timer Stop
 412                             		.loc 2 132 8
 413 021a EC A5                   		mov.L	[r10], r5
 414 021c EC 55                   		mov.L	[r5], r5
 415                             		.loc 2 132 2
 416 021e 62 A5                   		add	#10, r5
 417 0220 66 02                   		mov	#0, r2
 418 0222 EF 51                   		mov.L	r5, r1
 419 0224 39 DC FD                		bsr	_out_h
 133:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 134:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	return E_OK;
 420                             		.loc 2 134 9
 421 0227 66 05                   		mov.L	#0, r5
 422                             	.L26:
 135:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 423                             		.loc 2 135 1
 424 0229 EF 51                   		mov.L	r5, r1
 425 022b 3F AA 03                		rtsd	#12, r10-r10
 426                             	.LFE10:
 428                             		.global	_GetPhysicalTimerCount
 430                             	_GetPhysicalTimerCount:
 431                             	.LFB11:
 136:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 137:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 138:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** IMPORT ER GetPhysicalTimerCount( UINT ptmrno, UW *p_count )
 139:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
 432                             		.loc 2 139 1
 433 022e 7E AA                   		push.l	r10
 434                             	.LCFI16:
 435 0230 71 0A F4                		add	#-12, r0, r10
 436                             	.LCFI17:
 437 0233 EF A0                   		mov.L	r10, r0
 438 0235 E7 A1 01                		mov.L	r1, 4[r10]
 439 0238 E7 A2 02                		mov.L	r2, 8[r10]
 140:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_PTMRCB	*p_cb;
 141:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 142:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* parameter check */
 143:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( ptmrno == 0 || ptmrno > TK_MAX_PTIMER ) return E_PAR;
 440                             		.loc 2 143 4
 441 023b ED A5 01                		mov.L	4[r10], r5
 442 023e 61 05                   		cmp	#0, r5
 443 0240 10                      		beq	.L28
 444                             		.loc 2 143 18 discriminator 2
 445 0241 ED A5 01                		mov.L	4[r10], r5
 446 0244 61 25                   		cmp	#2, r5
 447 0246 25 07                   		bleu	.L29
 448                             	.L28:
 449                             		.loc 2 143 53 discriminator 3
 450 0248 FB 56 EF                		mov.L	#-17, r5
 451 024b 2E 34                   		bra	.L30
 452                             	.L29:
 144:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 145:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb = &ptmrcb[ptmrno - 1];
 453                             		.loc 2 145 24
 454 024d ED A5 01                		mov.L	4[r10], r5
 455 0250 60 15                   		sub	#1, r5
 456                             		.loc 2 145 7
 457 0252 6C 55                   		shll	#5, r5
 458 0254 70 55 00 00 00 00       		add	#_ptmrcb, r5
 459 025a E3 A5                   		mov.L	r5, [r10]
 146:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if(p_cb->mode < 0) return E_PAR;
 460                             		.loc 2 146 9
 461 025c EC A5                   		mov.L	[r10], r5
 462 025e A8 5D                   		mov.L	4[r5], r5
 463                             		.loc 2 146 4
 464 0260 61 05                   		cmp	#0, r5
 465 0262 28 07                   		bge	.L31
 466                             		.loc 2 146 28 discriminator 1
 467 0264 FB 56 EF                		mov.L	#-17, r5
 468 0267 2E 18                   		bra	.L30
 469                             	.L31:
 147:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 148:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Get Physical timer counter */
 149:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	*p_count = (UW)in_h(TMR_TCNT);	// Read counter.
 470                             		.loc 2 149 22
 471 0269 EC A5                   		mov.L	[r10], r5
 472 026b EC 55                   		mov.L	[r5], r5
 473                             		.loc 2 149 17
 474 026d 62 85                   		add	#8, r5
 475 026f EF 51                   		mov.L	r5, r1
 476 0271 39 BD FD                		bsr	_in_h
 477 0274 EF 15                   		mov.L	r1, r5
 478                             		.loc 2 149 13
 479 0276 5F 54                   		movu.W	r5, r4
 480                             		.loc 2 149 11
 481 0278 ED A5 02                		mov.L	8[r10], r5
 482 027b E3 54                   		mov.L	r4, [r5]
 150:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 151:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	return E_OK;
 483                             		.loc 2 151 9
 484 027d 66 05                   		mov.L	#0, r5
 485                             	.L30:
 152:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 486                             		.loc 2 152 1
 487 027f EF 51                   		mov.L	r5, r1
 488 0281 3F AA 04                		rtsd	#16, r10-r10
 489                             	.LFE11:
 491                             		.global	_DefinePhysicalTimerHandler
 493                             	_DefinePhysicalTimerHandler:
 494                             	.LFB12:
 153:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 154:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 155:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** EXPORT ER DefinePhysicalTimerHandler( UINT ptmrno, CONST T_DPTMR *pk_dptmr )
 156:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
 495                             		.loc 2 156 1
 496 0284 7E AA                   		push.l	r10
 497                             	.LCFI18:
 498 0286 71 0A F4                		add	#-12, r0, r10
 499                             	.LCFI19:
 500 0289 EF A0                   		mov.L	r10, r0
 501 028b E7 A1 01                		mov.L	r1, 4[r10]
 502 028e E7 A2 02                		mov.L	r2, 8[r10]
 157:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_PTMRCB	*p_cb;
 158:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 159:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* parameter check */
 160:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( ptmrno == 0 || ptmrno > TK_MAX_PTIMER ) return E_PAR;
 503                             		.loc 2 160 4
 504 0291 ED A5 01                		mov.L	4[r10], r5
 505 0294 61 05                   		cmp	#0, r5
 506 0296 10                      		beq	.L33
 507                             		.loc 2 160 18 discriminator 2
 508 0297 ED A5 01                		mov.L	4[r10], r5
 509 029a 61 25                   		cmp	#2, r5
 510 029c 25 07                   		bleu	.L34
 511                             	.L33:
 512                             		.loc 2 160 53 discriminator 3
 513 029e FB 56 EF                		mov.L	#-17, r5
 514 02a1 2E 32                   		bra	.L35
 515                             	.L34:
 161:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 162:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb = &ptmrcb[ptmrno - 1];
 516                             		.loc 2 162 24
 517 02a3 ED A5 01                		mov.L	4[r10], r5
 518 02a6 60 15                   		sub	#1, r5
 519                             		.loc 2 162 7
 520 02a8 6C 55                   		shll	#5, r5
 521 02aa 70 55 00 00 00 00       		add	#_ptmrcb, r5
 522 02b0 E3 A5                   		mov.L	r5, [r10]
 163:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 164:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* Set user Handler */
 165:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if(pk_dptmr != NULL) {
 523                             		.loc 2 165 4
 524 02b2 ED A5 02                		mov.L	8[r10], r5
 525 02b5 61 05                   		cmp	#0, r5
 526 02b7 20 15                   		beq	.L36
 166:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		p_cb->ptmrhdr	= pk_dptmr->ptmrhdr;
 527                             		.loc 2 166 27
 528 02b9 ED A5 02                		mov.L	8[r10], r5
 529 02bc A8 D4                   		mov.L	8[r5], r4
 530                             		.loc 2 166 17
 531 02be EC A5                   		mov.L	[r10], r5
 532 02c0 A0 DC                   		mov.L	r4, 12[r5]
 167:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		p_cb->exinf	= pk_dptmr->exinf;
 533                             		.loc 2 167 25
 534 02c2 ED A5 02                		mov.L	8[r10], r5
 535 02c5 EC 54                   		mov.L	[r5], r4
 536                             		.loc 2 167 15
 537 02c7 EC A5                   		mov.L	[r10], r5
 538 02c9 A1 DC                   		mov.L	r4, 28[r5]
 539 02cb 0E                      		bra	.L37
 540                             	.L36:
 168:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	} else {
 169:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		p_cb->ptmrhdr	= NULL;
 541                             		.loc 2 169 17
 542 02cc EC A5                   		mov.L	[r10], r5
 543 02ce 3E 53 00                		mov.L	#0, 12[r5]
 544                             	.L37:
 170:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
 171:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 172:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	return E_OK;
 545                             		.loc 2 172 9
 546 02d1 66 05                   		mov.L	#0, r5
 547                             	.L35:
 173:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 548                             		.loc 2 173 1
 549 02d3 EF 51                   		mov.L	r5, r1
 550 02d5 3F AA 04                		rtsd	#16, r10-r10
 551                             	.LFE12:
 553                             		.global	_GetPhysicalTimerConfig
 555                             	_GetPhysicalTimerConfig:
 556                             	.LFB13:
 174:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 175:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 176:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** EXPORT ER GetPhysicalTimerConfig(UINT ptmrno, T_RPTMR *pk_rptmr)
 177:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** {
 557                             		.loc 2 177 1
 558 02d8 7E AA                   		push.l	r10
 559                             	.LCFI20:
 560 02da 71 0A F0                		add	#-16, r0, r10
 561                             	.LCFI21:
 562 02dd EF A0                   		mov.L	r10, r0
 563 02df E7 A1 02                		mov.L	r1, 8[r10]
 564 02e2 E7 A2 03                		mov.L	r2, 12[r10]
 178:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	T_PTMRCB	*p_cb;
 179:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	UW		ptmrclk;
 180:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 181:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	/* parameter check */
 182:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	if( ptmrno == 0 || ptmrno > TK_MAX_PTIMER ) return E_PAR;
 565                             		.loc 2 182 4
 566 02e5 ED A5 02                		mov.L	8[r10], r5
 567 02e8 61 05                   		cmp	#0, r5
 568 02ea 10                      		beq	.L39
 569                             		.loc 2 182 18 discriminator 2
 570 02eb ED A5 02                		mov.L	8[r10], r5
 571 02ee 61 25                   		cmp	#2, r5
 572 02f0 25 08                   		bleu	.L40
 573                             	.L39:
 574                             		.loc 2 182 53 discriminator 3
 575 02f2 FB 56 EF                		mov.L	#-17, r5
 576 02f5 38 87 00                		bra	.L41
 577                             	.L40:
 183:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 184:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	p_cb = &ptmrcb[ptmrno - 1];
 578                             		.loc 2 184 24
 579 02f8 ED A5 02                		mov.L	8[r10], r5
 580 02fb 60 15                   		sub	#1, r5
 581                             		.loc 2 184 7
 582 02fd 6C 55                   		shll	#5, r5
 583 02ff 70 55 00 00 00 00       		add	#_ptmrcb, r5
 584 0305 E7 A5 01                		mov.L	r5, 4[r10]
 185:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 186:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	switch(p_cb->clock) {
 585                             		.loc 2 186 13
 586 0308 ED A5 01                		mov.L	4[r10], r5
 587 030b A9 D5                   		mov.L	24[r5], r5
 588                             		.loc 2 186 2
 589 030d 61 B5                   		cmp	#11, r5
 590 030f 20 39                   		beq	.L42
 591 0311 61 B5                   		cmp	#11, r5
 592 0313 24 10                   		bgtu	.L43
 593 0315 61 95                   		cmp	#9, r5
 594 0317 20 22                   		beq	.L44
 595 0319 61 95                   		cmp	#9, r5
 596 031b 24 26                   		bgtu	.L45
 597 031d 61 85                   		cmp	#8, r5
 598 031f 20 12                   		beq	.L46
 599 0321 2E 40                   		bra	.L47
 600                             	.L43:
 601 0323 61 D5                   		cmp	#13, r5
 602 0325 20 31                   		beq	.L48
 603 0327 61 D5                   		cmp	#13, r5
 604 0329 23 26                   		bltu	.L49
 605 032b 61 E5                   		cmp	#14, r5
 606 032d 20 2F                   		beq	.L50
 607 032f 2E 32                   		bra	.L47
 608                             	.L46:
 187:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x08:
 188:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB;
 609                             		.loc 2 188 12
 610 0331 F8 A2 00 87 93 03       		mov.L	#0x3938700, [r10]
 189:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 611                             		.loc 2 189 4
 612 0337 2E 2D                   		bra	.L51
 613                             	.L44:
 190:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x09:
 191:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/2;
 614                             		.loc 2 191 12
 615 0339 F8 A2 80 C3 C9 01       		mov.L	#0x1c9c380, [r10]
 192:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 616                             		.loc 2 192 4
 617 033f 2E 25                   		bra	.L51
 618                             	.L45:
 193:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x0A:
 194:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/8;
 619                             		.loc 2 194 12
 620 0341 F8 AE E0 70 72          		mov.L	#0x7270e0, [r10]
 195:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 621                             		.loc 2 195 4
 622 0346 2E 1E                   		bra	.L51
 623                             	.L42:
 196:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x0B:
 197:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/32;
 624                             		.loc 2 197 12
 625 0348 F8 AE 38 9C 1C          		mov.L	#0x1c9c38, [r10]
 198:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 626                             		.loc 2 198 4
 627 034d 2E 17                   		bra	.L51
 628                             	.L49:
 199:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x0C:
 200:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/64;
 629                             		.loc 2 200 12
 630 034f F8 AE 1C 4E 0E          		mov.L	#0xe4e1c, [r10]
 201:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 631                             		.loc 2 201 4
 632 0354 2E 10                   		bra	.L51
 633                             	.L48:
 202:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x0D:
 203:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/1024;
 634                             		.loc 2 203 12
 635 0356 F8 AE E1 E4 00          		mov.L	#0xe4e1, [r10]
 204:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 636                             		.loc 2 204 4
 637 035b 09                      		bra	.L51
 638                             	.L50:
 205:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		case 0x0E:
 206:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = SYSCLK_PCLKB/8192;
 639                             		.loc 2 206 12
 640 035c F8 AA 9C 1C             		mov.L	#0x1c9c, [r10]
 207:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			break;
 641                             		.loc 2 207 4
 642 0360 0C                      		bra	.L51
 643                             	.L47:
 208:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 		default:
 209:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 			ptmrclk = 0;		// Unkown
 644                             		.loc 2 209 12
 645 0361 F8 A6 00                		mov.L	#0, [r10]
 646                             		.balign 8,3,1
 647                             	.L51:
 210:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	}
 211:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	pk_rptmr->ptmrclk	= ptmrclk;
 648                             		.loc 2 211 20
 649 0364 ED A5 03                		mov.L	12[r10], r5
 650 0367 EC A4                   		mov.L	[r10], r4
 651 0369 E3 54                   		mov.L	r4, [r5]
 212:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	pk_rptmr->maxcount	= PTMR_MAX_CNT;
 652                             		.loc 2 212 21
 653 036b ED A5 03                		mov.L	12[r10], r5
 654 036e F9 5E 01 FF FF 00       		mov.L	#0xffff, 4[r5]
 213:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	pk_rptmr->defhdr	= TRUE;
 655                             		.loc 2 213 19
 656 0374 ED A5 03                		mov.L	12[r10], r5
 657 0377 3E 52 01                		mov.L	#1, 8[r5]
 214:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 
 215:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** 	return E_OK;
 658                             		.loc 2 215 9
 659 037a 66 05                   		mov.L	#0, r5
 660                             	.L41:
 216:../lib/libtk/sysdepend/cpu/rx65n/ptimer_rx65n.c **** }
 661                             		.loc 2 216 1
 662 037c EF 51                   		mov.L	r5, r1
 663 037e 3F AA 05                		rtsd	#20, r10-r10
 664                             	.LFE13:
 893                             	.Letext0:
 894                             		.file 3 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/typedef.h"
 895                             		.file 4 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/syscall.h"
 896                             		.file 5 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/syslib.h"
